# Misaki_Bot

Misaki是什么?

<img src="Misakiaoba.gif" style="zoom:50%;" align="left" />

**M**ltd **i**nteractive **S**core-count **a**ssistant **Ki**t, 是一款提供MLTD活动档线相关功能的 [酷Q]( https://cqp.cc/ ) 机器人插件。它基于 [nonebot]( https://github.com/richardchien/nonebot ) 编写，目前没有使用需要CoolQ Pro的功能。

MLTD的实时档线数据来源于 [Princess]( https://api.matsurihi.me/docs/ ) 提供的Web API。

## 使用

一个运行了该插件的QQ:  `2691581535` , 你可以在好友验证中填写 `765` 来添加它 , 也可以将它邀请至你所在的群。它可能由于各种原因暂时无法工作，请保持宽容。

如果你有条件，也可以在你的CoolQ Bot上运行它，或者为它添加更多功能。部署及配置方式请参考 nonebot 的文档。

考虑到泛用性和计划的服务人(群)数，作者不打算添加消耗资源较高的功能：如需要加载图片，或频繁调用外部api的查询。

### 运行

首次运行前，你需要执行一次`dbinit.init_database()`来确保数据库中的历史档线信息是完整的，否则历史档线查询及档线预测的功能会受到影响。

### 档线预测

当前的档线预测方式是较朴素的一元/多元线性回归，活动后半开始后每6h自动更新一次，预测效果差强人意。欢迎对MLTD活动档线走势有见解的有能P提出意见，或者提交pull request。

由于周年活动规则的不确定性，作者暂时没有为其添加预测功能的计划。历史查询可能会加，但是也没什么动力。

### 数据库

MisakiBot使用了一个 `sqlite3` 数据库实现部分数据的持久化以降低外部api的调用频率。数据库文件为运行环境目录的 `Misaki.db` 。在不添加 / 修改功能的情况下，除了上面提到的更新档线，不需要对其做额外的操作。

## 已实现的指令列表

这些指令已经可以使用了。

```
档线查询
高分查询
历史档线
历史高分
档线预警（取消预警）
档线预测
传统控分
巡演控分
帮助
关于
```

## 待实现的指令列表

```

```

